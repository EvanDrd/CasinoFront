<header class="en-tete-casino">
  <div class="barre">

    <!-- Zone gauche -->
    <div class="zone-gauche d-flex aic gap-12">

      <!-- Bouton Bonus quotidien -->
      <button
        class="gift-btn"
        [class.available]="canClaim"
        [disabled]="!canClaim || bonusLoading"
        (click)="onClickGift()"
        [title]="giftTooltip">
        <img src="assets/images/bonus.png" alt="Bonus quotidien" style="width:60px;height:60px;">

      </button>

      <h1>Mon Casino</h1>
    </div>

    <!-- Logo centré -->
    <div class="logo-centre">
      <a [routerLink]="['/home']" aria-label="Accueil">
        <img src="assets/images/logo.jpg" alt="Logo Mon Casino">
      </a>
    </div>

    <!-- Zone droite -->
    <div class="zone-droite">
      <ng-container *ngIf="isLoggedIn(); else showLogin">
        <div class="d-flex aic gap-12">
          <div style="text-align:right;">
            <small class="texte-secondaire" style="display:block;margin-bottom:2px;">Connecté·e en tant que</small>
            <strong>{{ userObj?.pseudo || userObj?.email }}</strong>
          </div>
          <app-balance-header></app-balance-header>
          <button (click)="logout()" class="bouton bouton--danger">Se déconnecter</button>
        </div>
      </ng-container>

      <ng-template #showLogin>
        <form (ngSubmit)="submitLogin()" class="d-flex aic gap-8">
          <input [(ngModel)]="email" name="email" type="email" placeholder="email" class="champ" style="width:180px;">
          <input [(ngModel)]="motDePasse" name="motDePasse" type="password" placeholder="mot de passe" class="champ" style="width:160px;">
          <button type="submit" [disabled]="loading" class="bouton bouton--primaire">
            {{ loading ? 'Connexion…' : 'Se connecter' }}
          </button>
          <button type="button" (click)="router.navigate(['/register'])" class="bouton">
            S'inscrire
          </button>
        </form>
        <div *ngIf="error" style="color:#ffb3b3;margin-left:12px;">{{ error }}</div>
      </ng-template>
    </div>
  </div>

  <!-- Petit toast -->
  <div *ngIf="bonusMsg" style="position:fixed;top:12px;left:12px;background:#1f2937;color:#fff;padding:8px 10px;border-radius:8px;">
    {{ bonusMsg }}
  </div>
</header>
